pipeline {
    agent any
    stages {
        stage('enable nmt scale'){
            steps {
                sh '''sh /mnt/deploy/script/enable_tencent_nmt.sh'''
            }
            post {
                success {
                    feiShuTalk (
                        robot: "e522b94f-5a3f-4674-a30c-04b51727f1a5",
                        type: "INTERACTIVE",
                        title: "âœ… NMTæ‰©å®¹æˆåŠŸ",
                        text: [
                            "ğŸ“‹ **ä»»åŠ¡åç§°**ï¼šç¿»è¯‘æ‰©å®¹ç»“æœé€šçŸ¥",
                            "ğŸ”¢ **ä»»åŠ¡ç¼–å·**ï¼š[${BUILD_DISPLAY_NAME}](${BUILD_URL})",
                            "ğŸŒŸ **æ„å»ºçŠ¶æ€**: <font color='green'>æˆåŠŸ</font>",
                            "ğŸ• **æ„å»ºç”¨æ—¶**: ${currentBuild.duration} ms"
                        ],
                        buttons: [
                           [
                              title: "æ‰§è¡Œè®°å½•",
                              url: "${BUILD_URL}console"
                           ]
                           
                        ]
                    )
                }
                failure {
                    feiShuTalk (
                        robot: "e522b94f-5a3f-4674-a30c-04b51727f1a5",
                        type: "INTERACTIVE",
                        title: "âŒ NMTæ‰©å®¹å¤±è´¥",
                        text: [
                            "ğŸ“‹ **ä»»åŠ¡åç§°**ï¼šç¿»è¯‘æ‰©å®¹ç»“æœé€šçŸ¥",
                            "ğŸ”¢ **ä»»åŠ¡ç¼–å·**ï¼š[${BUILD_DISPLAY_NAME}](${BUILD_URL})",
                            "ğŸŒŸ **æ„å»ºçŠ¶æ€**: <font color='red'>å¤±è´¥</font>",
                            "ğŸ• **æ„å»ºç”¨æ—¶**: ${currentBuild.duration} ms",
                            "<at id=all></at>"
                        ],
                        buttons: [
                           [
                              title: "æ‰§è¡Œè®°å½•",
                              type: "danger",
                              url: "${BUILD_URL}console"
                           ]
                        ]
                    )
                }
            }
        }
    }
}
